import{n as G,P as Ht,C as Gt,s as At,m as yt,i as T,f as m,Q as Qt,e as k,c as C,l as Q,o as d,b as R,x as Yt,a as O,g as $,r as wt,h as v,p as j,v as dt,y as Jt,z as Kt,A as Wt,w as Bt,k as ot,t as Z,d as tt,j as Et,I as Xt,F as Zt,R as xt,u as at,H as te,S as ee}from"../chunks/scheduler.Bso-5iR9.js";import{n as le,l as se,h as ne,j as ae,S as Mt,i as Vt,g as pt,b as Y,e as _t,t as z,c as jt,a as Ft,m as qt,d as zt}from"../chunks/index.DVUUAQG0.js";import{e as ut,u as ie,f as re,U as oe,g as ue,a as ce}from"../chunks/UserLink.BV0RGjwU.js";import{p as fe}from"../chunks/stores.B0X-1PFb.js";import{c as he}from"../chunks/index.CvmYViMX.js";import{u as de,c as pe,h as ft,i as ht,f as Lt,o as _e,p as me}from"../chunks/firebase.z92QYSMm.js";import{w as be}from"../chunks/index.C_-ABqwe.js";function ge(l,t,e,a){if(!t)return G;const i=l.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return G;const{delay:h=0,duration:r=300,easing:n=Ht,start:s=le()+h,end:o=s+r,tick:_=G,css:y}=e(l,{from:t,to:i},a);let u=!0,c=!1,p;function M(){y&&(p=ne(l,0,1,r,h,n,y)),h||(c=!0)}function I(){y&&ae(l,p),u=!1}return se(N=>{if(!c&&N>=s&&(c=!0),c&&N>=o&&(_(1,0),I()),!u)return!1;if(c){const A=N-s,V=0+1*n(A/r);_(V,1-V)}return!0}),M(),_(0,1),I}function ve(l){const t=getComputedStyle(l);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:e,height:a}=t,i=l.getBoundingClientRect();l.style.position="absolute",l.style.width=e,l.style.height=a,ke(l,i)}}function ke(l,t){const e=l.getBoundingClientRect();if(t.left!==e.left||t.top!==e.top){const a=getComputedStyle(l),i=a.transform==="none"?"":a.transform;l.style.transform=`${i} translate(${t.left-e.left}px, ${t.top-e.top}px)`}}function Ce(l,{from:t,to:e},a={}){const i=getComputedStyle(l),h=i.transform==="none"?"":i.transform,[r,n]=i.transformOrigin.split(" ").map(parseFloat),s=t.left+t.width*r/e.width-(e.left+r),o=t.top+t.height*n/e.height-(e.top+n),{delay:_=0,duration:y=c=>Math.sqrt(c)*120,easing:u=he}=a;return{delay:_,duration:Gt(y)?y(Math.sqrt(s*s+o*o)):y,easing:u,css:(c,p)=>{const M=p*s,I=p*o,N=c+p*t.width/e.width,A=c+p*t.height/e.height;return`transform: ${h} translate(${M}px, ${I}px) scale(${N}, ${A});`}}}function Pt(l,t,e){const a=l.slice();return a[9]=t[e],a[11]=e,a}const ye=l=>({item:l&1,index:l&1}),Dt=l=>({item:l[9],index:l[11]});function we(l){let t,e="No items";return{c(){t=k("p"),t.textContent=e,this.h()},l(a){t=C(a,"P",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1jmwi8z"&&(t.textContent=e),this.h()},h(){d(t,"class","text-center my-12 text-lg font-bold")},m(a,i){T(a,t,i)},p:G,i:G,o:G,d(a){a&&m(t)}}}function Ee(l){let t,e=[],a=new Map,i,h=ut(l[0]);const r=n=>n[9].id;for(let n=0;n<h.length;n+=1){let s=Pt(l,h,n),o=r(s);a.set(o,e[n]=Tt(o,s))}return{c(){t=k("ul");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=C(n,"UL",{class:!0});var s=R(t);for(let o=0;o<e.length;o+=1)e[o].l(s);s.forEach(m),this.h()},h(){d(t,"class","list-none p-0 flex flex-col items-center")},m(n,s){T(n,t,s);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null);i=!0},p(n,s){if(s&63){h=ut(n[0]),pt();for(let o=0;o<e.length;o+=1)e[o].r();e=ie(e,s,r,1,n,h,a,t,re,Tt,null,Pt);for(let o=0;o<e.length;o+=1)e[o].a();_t()}},i(n){if(!i){for(let s=0;s<h.length;s+=1)z(e[s]);i=!0}},o(n){for(let s=0;s<e.length;s+=1)Y(e[s]);i=!1},d(n){n&&m(t);for(let s=0;s<e.length;s+=1)e[s].d()}}}function Tt(l,t){let e,a,i,h,r,n=G,s,o,_;const y=t[6].default,u=Yt(y,t,t[5],Dt);return{key:l,first:null,c(){e=k("li"),u&&u.c(),a=O(),this.h()},l(c){e=C(c,"LI",{class:!0,"data-index":!0,"data-id":!0,draggable:!0});var p=R(e);u&&u.l(p),a=$(p),p.forEach(m),this.h()},h(){d(e,"class","border-2 border-dashed border-transparent p-2 transition-all max-w-md w-full svelte-1fgegi8"),d(e,"data-index",i=t[11]),d(e,"data-id",h=t[9].id),d(e,"draggable","true"),wt(e,"over",t[9].id===t[1]),this.first=e},m(c,p){T(c,e,p),u&&u.m(e,null),v(e,a),s=!0,o||(_=[j(e,"dragstart",Le),j(e,"dragover",dt(t[3])),j(e,"dragleave",t[2]),j(e,"drop",dt(t[4]))],o=!0)},p(c,p){t=c,u&&u.p&&(!s||p&33)&&Jt(u,y,t,t[5],s?Wt(y,t[5],p,ye):Kt(t[5]),Dt),(!s||p&1&&i!==(i=t[11]))&&d(e,"data-index",i),(!s||p&1&&h!==(h=t[9].id))&&d(e,"data-id",h),(!s||p&3)&&wt(e,"over",t[9].id===t[1])},r(){r=e.getBoundingClientRect()},f(){ve(e),n()},a(){n(),n=ge(e,r,Ce,{duration:300})},i(c){s||(z(u,c),s=!0)},o(c){Y(u,c),s=!1},d(c){c&&m(e),u&&u.d(c),o=!1,Bt(_)}}}function xe(l){let t,e,a,i;const h=[Ee,we],r=[];function n(s,o){var _;return(_=s[0])!=null&&_.length?0:1}return t=n(l),e=r[t]=h[t](l),{c(){e.c(),a=yt()},l(s){e.l(s),a=yt()},m(s,o){r[t].m(s,o),T(s,a,o),i=!0},p(s,[o]){let _=t;t=n(s),t===_?r[t].p(s,o):(pt(),Y(r[_],1,1,()=>{r[_]=null}),_t(),e=r[t],e?e.p(s,o):(e=r[t]=h[t](s),e.c()),z(e,1),e.m(a.parentNode,a))},i(s){i||(z(e),i=!0)},o(s){Y(e),i=!1},d(s){s&&m(a),r[t].d(s)}}}function it(l){return l.dataset.index?{...l.dataset}:it(l.parentNode)}function Le(l){var e;const t=it(l.target);(e=l.dataTransfer)==null||e.setData("source",t==null?void 0:t.index.toString())}function Pe(l,t,e){let{$$slots:a={},$$scope:i}=t,{list:h=[]}=t,r=!1;const n=Qt();function s({from:u,to:c}){const p=[...h];p[u]=[p[c],p[c]=p[u]][0],n("sort",p)}function o(u){const c=it(u.target);r===c.id&&e(1,r=!1)}function _(u){var p;(p=u.target.dataset)==null||p.id;const c=it(u.target);e(1,r=(c==null?void 0:c.id)??!1)}function y(u){var p;e(1,r=!1);const c=it(u.target);s({from:(p=u.dataTransfer)==null?void 0:p.getData("source"),to:c.index})}return l.$$set=u=>{"list"in u&&e(0,h=u.list),"$$scope"in u&&e(5,i=u.$$scope)},[h,r,o,_,y,i,a]}class De extends Mt{constructor(t){super(),Vt(this,t,Pe,xe,At,{list:0})}}function It(l,t,e){const a=l.slice();return a[20]=t[e],a}function Nt(l){var bt,gt,vt;let t,e="Edit your Profile",a,i,h,r,n,s,o=((bt=l[5])==null?void 0:bt.username)+"",_,y,u,c,p,M="Change photo",I,N,A,V,B,x,b,w,P,g=(gt=l[5])!=null&&gt.published?"Public profile":"Private profile",L,D,S,J,H,F,rt,et,q,ct,mt;F=new De({props:{list:(vt=l[5])==null?void 0:vt.links,$$slots:{default:[Te,({item:f})=>({23:f}),({item:f})=>f?8388608:0]},$$scope:{ctx:l}}}),F.$on("sort",l[11]);let U=l[3]&&St(l);return{c(){t=k("h1"),t.textContent=e,a=O(),i=k("div"),h=k("p"),r=Z(`Profile Link:
        `),n=k("a"),s=Z("https://choo.choo/"),_=Z(o),u=O(),c=k("div"),p=k("a"),p.textContent=M,I=O(),N=k("a"),A=Z("Edit Bio"),B=O(),x=k("form"),b=k("label"),w=k("span"),P=k("div"),L=Z(g),D=O(),S=k("input"),H=O(),jt(F.$$.fragment),rt=O(),U&&U.c(),et=O(),this.h()},l(f){t=C(f,"H1",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-k6uny7"&&(t.textContent=e),a=$(f),i=C(f,"DIV",{class:!0});var E=R(i);h=C(E,"P",{});var K=R(h);r=tt(K,`Profile Link:
        `),n=C(K,"A",{href:!0,class:!0});var lt=R(n);s=tt(lt,"https://choo.choo/"),_=tt(lt,o),lt.forEach(m),K.forEach(m),E.forEach(m),u=$(f),c=C(f,"DIV",{class:!0});var W=R(c);p=C(W,"A",{class:!0,href:!0,"data-svelte-h":!0}),Q(p)!=="svelte-1hnlagx"&&(p.textContent=M),I=$(W),N=C(W,"A",{class:!0,href:!0});var st=R(N);A=tt(st,"Edit Bio"),st.forEach(m),W.forEach(m),B=$(f),x=C(f,"FORM",{class:!0});var nt=R(x);b=C(nt,"LABEL",{class:!0});var X=R(b);w=C(X,"SPAN",{class:!0});var kt=R(w);P=C(kt,"DIV",{class:!0,"data-tip":!0});var Ct=R(P);L=tt(Ct,g),Ct.forEach(m),kt.forEach(m),D=$(X),S=C(X,"INPUT",{type:!0,class:!0}),X.forEach(m),nt.forEach(m),H=$(f),Ft(F.$$.fragment,f),rt=$(f),U&&U.l(f),et=$(f),this.h()},h(){var f,E;d(t,"class","mx-2 text-2xl font-bold mt-8 mb-4 text-center"),d(n,"href",y=`/${(f=l[5])==null?void 0:f.username}`),d(n,"class","link link-accent"),d(i,"class","text-center mb-8"),d(p,"class","btn btn-outline btn-xs"),d(p,"href","/login/photo"),d(N,"class","btn btn-outline btn-xs"),d(N,"href",V=`/${l[5].username}/bio`),d(c,"class","text-center my-4"),d(P,"class","tooltip group-hover:tooltip-open"),d(P,"data-tip","If public, the world can see your profile"),d(w,"class","label-text mr-6"),d(S,"type","checkbox"),d(S,"class","toggle toggle-success"),S.checked=J=(E=l[5])==null?void 0:E.published,d(b,"class","label cursor-pointer flex items-start justify-center"),d(x,"class","form-control")},m(f,E){T(f,t,E),T(f,a,E),T(f,i,E),v(i,h),v(h,r),v(h,n),v(n,s),v(n,_),T(f,u,E),T(f,c,E),v(c,p),v(c,I),v(c,N),v(N,A),T(f,B,E),T(f,x,E),v(x,b),v(b,w),v(w,P),v(P,L),v(b,D),v(b,S),T(f,H,E),qt(F,f,E),T(f,rt,E),U&&U.m(f,E),T(f,et,E),q=!0,ct||(mt=j(S,"change",l[12]),ct=!0)},p(f,E){var lt,W,st,nt,X;(!q||E&32)&&o!==(o=((lt=f[5])==null?void 0:lt.username)+"")&&Et(_,o),(!q||E&32&&y!==(y=`/${(W=f[5])==null?void 0:W.username}`))&&d(n,"href",y),(!q||E&32&&V!==(V=`/${f[5].username}/bio`))&&d(N,"href",V),(!q||E&32)&&g!==(g=(st=f[5])!=null&&st.published?"Public profile":"Private profile")&&Et(L,g),(!q||E&32&&J!==(J=(nt=f[5])==null?void 0:nt.published))&&(S.checked=J);const K={};E&32&&(K.list=(X=f[5])==null?void 0:X.links),E&25165824&&(K.$$scope={dirty:E,ctx:f}),F.$set(K),f[3]?U?U.p(f,E):(U=St(f),U.c(),U.m(et.parentNode,et)):U&&(U.d(1),U=null)},i(f){q||(z(F.$$.fragment,f),q=!0)},o(f){Y(F.$$.fragment,f),q=!1},d(f){f&&(m(t),m(a),m(i),m(u),m(c),m(B),m(x),m(H),m(rt),m(et)),zt(F,f),U&&U.d(f),ct=!1,mt()}}}function Te(l){let t,e,a;const i=[l[23]];let h={};for(let r=0;r<i.length;r+=1)h=Xt(h,i[r]);return e=new oe({props:h}),{c(){t=k("div"),jt(e.$$.fragment),this.h()},l(r){t=C(r,"DIV",{class:!0});var n=R(t);Ft(e.$$.fragment,n),n.forEach(m),this.h()},h(){d(t,"class","group relative")},m(r,n){T(r,t,n),qt(e,t,null),a=!0},p(r,n){const s=n&8388608?ue(i,[ce(r[23])]):{};e.$set(s)},i(r){a||(z(e.$$.fragment,r),a=!0)},o(r){Y(e.$$.fragment,r),a=!1},d(r){r&&m(t),zt(e)}}}function St(l){let t,e,a,i,h,r,n,s,o,_,y,u,c,p,M,I,N="Cancel",A,V,B=ut(l[7]),x=[];for(let g=0;g<B.length;g+=1)x[g]=Rt(It(l,B,g));let b=!l[0]&&Ut(),w=!l[1]&&Ot(),P=l[4]&&$t();return{c(){t=k("form"),e=k("select");for(let g=0;g<x.length;g+=1)x[g].c();a=O(),i=k("input"),h=O(),r=k("input"),n=O(),s=k("div"),b&&b.c(),o=O(),w&&w.c(),_=O(),P&&P.c(),y=O(),u=k("button"),c=Z("Add Link"),M=O(),I=k("button"),I.textContent=N,this.h()},l(g){t=C(g,"FORM",{class:!0});var L=R(t);e=C(L,"SELECT",{name:!0,class:!0});var D=R(e);for(let H=0;H<x.length;H+=1)x[H].l(D);D.forEach(m),a=$(L),i=C(L,"INPUT",{name:!0,type:!0,placeholder:!0,class:!0}),h=$(L),r=C(L,"INPUT",{name:!0,type:!0,placeholder:!0,class:!0}),n=$(L),s=C(L,"DIV",{class:!0});var S=R(s);b&&b.l(S),o=$(S),w&&w.l(S),_=$(S),P&&P.l(S),S.forEach(m),y=$(L),u=C(L,"BUTTON",{type:!0,class:!0});var J=R(u);c=tt(J,"Add Link"),J.forEach(m),M=$(L),I=C(L,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(I)!=="svelte-27ebzp"&&(I.textContent=N),L.forEach(m),this.h()},h(){d(e,"name","icon"),d(e,"class","select select-sm"),l[2].icon===void 0&&Zt(()=>l[13].call(e)),d(i,"name","title"),d(i,"type","text"),d(i,"placeholder","Title"),d(i,"class","input input-sm"),d(r,"name","url"),d(r,"type","text"),d(r,"placeholder","URL"),d(r,"class","input input-sm"),d(s,"class","my-4"),u.disabled=p=!l[4],d(u,"type","submit"),d(u,"class","btn btn-success block"),d(I,"type","button"),d(I,"class","btn btn-xs my-4"),d(t,"class","bg-base-200 p-6 w-full mx-auto rounded-xl")},m(g,L){T(g,t,L),v(t,e);for(let D=0;D<x.length;D+=1)x[D]&&x[D].m(e,null);xt(e,l[2].icon,!0),v(t,a),v(t,i),at(i,l[2].title),v(t,h),v(t,r),at(r,l[2].url),v(t,n),v(t,s),b&&b.m(s,null),v(s,o),w&&w.m(s,null),v(s,_),P&&P.m(s,null),v(t,y),v(t,u),v(u,c),v(t,M),v(t,I),A||(V=[j(e,"change",l[13]),j(i,"input",l[14]),j(r,"input",l[15]),j(I,"click",l[10]),j(t,"submit",dt(l[9]))],A=!0)},p(g,L){if(L&128){B=ut(g[7]);let D;for(D=0;D<B.length;D+=1){const S=It(g,B,D);x[D]?x[D].p(S,L):(x[D]=Rt(S),x[D].c(),x[D].m(e,null))}for(;D<x.length;D+=1)x[D].d(1);x.length=B.length}L&132&&xt(e,g[2].icon),L&132&&i.value!==g[2].title&&at(i,g[2].title),L&132&&r.value!==g[2].url&&at(r,g[2].url),g[0]?b&&(b.d(1),b=null):b||(b=Ut(),b.c(),b.m(s,o)),g[1]?w&&(w.d(1),w=null):w||(w=Ot(),w.c(),w.m(s,_)),g[4]?P||(P=$t(),P.c(),P.m(s,null)):P&&(P.d(1),P=null),L&16&&p!==(p=!g[4])&&(u.disabled=p)},d(g){g&&m(t),te(x,g),b&&b.d(),w&&w.d(),P&&P.d(),A=!1,Bt(V)}}}function Rt(l){let t,e=l[20]+"",a;return{c(){t=k("option"),a=Z(e),this.h()},l(i){t=C(i,"OPTION",{});var h=R(t);a=tt(h,e),h.forEach(m),this.h()},h(){t.__value=l[20].toLowerCase(),at(t,t.__value)},m(i,h){T(i,t,h),v(t,a)},p:G,d(i){i&&m(t)}}}function Ut(l){let t,e="Must have valid title";return{c(){t=k("p"),t.textContent=e,this.h()},l(a){t=C(a,"P",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1clkdjx"&&(t.textContent=e),this.h()},h(){d(t,"class","text-error text-xs")},m(a,i){T(a,t,i)},d(a){a&&m(t)}}}function Ot(l){let t,e="Must have a valid URL";return{c(){t=k("p"),t.textContent=e,this.h()},l(a){t=C(a,"P",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-ckpz19"&&(t.textContent=e),this.h()},h(){d(t,"class","text-error text-xs")},m(a,i){T(a,t,i)},d(a){a&&m(t)}}}function $t(l){let t,e="Looks good!";return{c(){t=k("p"),t.textContent=e,this.h()},l(a){t=C(a,"P",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-18u4utf"&&(t.textContent=e),this.h()},h(){d(t,"class","text-success text-xs")},m(a,i){T(a,t,i)},d(a){a&&m(t)}}}function Ie(l){var s;let t,e,a="Add a Link",i,h,r,n=((s=l[5])==null?void 0:s.username)==l[6].params.username&&Nt(l);return{c(){t=k("main"),n&&n.c(),e=k("button"),e.textContent=a,this.h()},l(o){t=C(o,"MAIN",{class:!0});var _=R(t);n&&n.l(_),e=C(_,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-159s1qn"&&(e.textContent=a),_.forEach(m),this.h()},h(){d(e,"class","btn btn-outline btn-info block mx-auto my-4"),d(t,"class","max-w-xl mx-auto")},m(o,_){T(o,t,_),n&&n.m(t,null),v(t,e),i=!0,h||(r=j(e,"click",l[16]),h=!0)},p(o,[_]){var y;((y=o[5])==null?void 0:y.username)==o[6].params.username?n?(n.p(o,_),_&96&&z(n,1)):(n=Nt(o),n.c(),z(n,1),n.m(t,e)):n&&(pt(),Y(n,1,1,()=>{n=null}),_t())},i(o){i||(z(n),i=!0)},o(o){Y(n),i=!1},d(o){o&&m(t),n&&n.d(),h=!1,r()}}}function Ne(l,t,e){let a,i,h,r,n,s,o;ot(l,de,b=>e(5,r=b)),ot(l,pe,b=>e(17,n=b)),ot(l,fe,b=>e(6,o=b));const _=["Twitter","YouTube","TikTok","LinkedIn","GitHub","Custom"],y={icon:"custom",title:"",url:"https://"},u=be(y);ot(l,u,b=>e(2,s=b));let c=!1;async function p(b){const w=ft(ht,"users",n.uid);await Lt(w,{links:_e({...s,id:Date.now().toString()})}),u.set({icon:"",title:"",url:""}),e(3,c=!1)}function M(){u.set(y),e(3,c=!1)}function I(b){const w=b.detail,P=ft(ht,"users",n.uid);me(P,{links:w},{merge:!0})}async function N(b){const w=ft(ht,"users",n.uid);await Lt(w,{published:!(r!=null&&r.published)})}function A(){s.icon=ee(this),u.set(s),e(7,_)}function V(){s.title=this.value,u.set(s),e(7,_)}function B(){s.url=this.value,u.set(s),e(7,_)}const x=()=>e(3,c=!0);return l.$$.update=()=>{l.$$.dirty&4&&e(1,a=s.url.match(/^(ftp|http|https):\/\/[^ "]+$/)),l.$$.dirty&4&&e(0,i=s.title.length<20&&s.title.length>0),l.$$.dirty&3&&e(4,h=a&&i)},[i,a,s,c,h,r,o,_,u,p,M,I,N,A,V,B,x]}class Me extends Mt{constructor(t){super(),Vt(this,t,Ne,Ie,At,{})}}export{Me as component};
