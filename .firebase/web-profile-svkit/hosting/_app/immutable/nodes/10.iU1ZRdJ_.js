import{s as F,k as H,e as k,a as P,c as v,l as z,g as V,b as j,f as _,o as C,r as A,i as U,h as p,u as N,p as D,v as M,w as Z,t as w,d as y,j as L}from"../chunks/scheduler.Bso-5iR9.js";import{S as G,i as J,c as K,a as Q,m as W,t as X,b as Y,d as x}from"../chunks/index.DVUUAQG0.js";import{A as ee}from"../chunks/AuthCheck.BcyXFMdR.js";import{c as te,h as I,i as B,j as se,w as le}from"../chunks/firebase.z92QYSMm.js";function O(l){let e,n,s,i;return{c(){e=k("p"),n=w("Checking availability of @"),s=w(l[0]),i=w("..."),this.h()},l(t){e=v(t,"P",{class:!0});var r=j(e);n=y(r,"Checking availability of @"),s=y(r,l[0]),i=y(r,"..."),r.forEach(_),this.h()},h(){C(e,"class","text-secondary")},m(t,r){U(t,e,r),p(e,n),p(e,s),p(e,i)},p(t,r){r&1&&L(s,t[0])},d(t){t&&_(e)}}}function R(l){let e,n="must be 3-16 characters long, alphanumeric only";return{c(){e=k("p"),e.textContent=n,this.h()},l(s){e=v(s,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1wurl8l"&&(e.textContent=n),this.h()},h(){C(e,"class","text-error text-sm")},m(s,i){U(s,e,i)},d(s){s&&_(e)}}}function S(l){let e,n,s,i;return{c(){e=k("p"),n=w("@"),s=w(l[0]),i=w(" is not available"),this.h()},l(t){e=v(t,"P",{class:!0});var r=j(e);n=y(r,"@"),s=y(r,l[0]),i=y(r," is not available"),r.forEach(_),this.h()},h(){C(e,"class","text-warning text-sm")},m(t,r){U(t,e,r),p(e,n),p(e,s),p(e,i)},p(t,r){r&1&&L(s,t[0])},d(t){t&&_(e)}}}function $(l){let e,n,s;return{c(){e=k("button"),n=w("Confirm username @"),s=w(l[0]),this.h()},l(i){e=v(i,"BUTTON",{class:!0});var t=j(e);n=y(t,"Confirm username @"),s=y(t,l[0]),t.forEach(_),this.h()},h(){C(e,"class","btn btn-success")},m(i,t){U(i,e,t),p(e,n),p(e,s)},p(i,t){t&1&&L(s,i[0])},d(i){i&&_(e)}}}function ie(l){let e,n="Username",s,i,t,r,o,d,b,T,E,q,f=l[1]&&O(l),u=!l[3]&&l[5]&&R(),c=l[3]&&!l[2]&&!l[1]&&S(l),h=l[2]&&$(l);return{c(){e=k("h2"),e.textContent=n,s=P(),i=k("form"),t=k("input"),r=P(),o=k("div"),f&&f.c(),d=P(),u&&u.c(),b=P(),c&&c.c(),T=P(),h&&h.c(),this.h()},l(a){e=v(a,"H2",{"data-svelte-h":!0}),z(e)!=="svelte-h7fq4i"&&(e.textContent=n),s=V(a),i=v(a,"FORM",{});var m=j(i);t=v(m,"INPUT",{type:!0,placeholder:!0,class:!0}),r=V(m),o=v(m,"DIV",{class:!0});var g=j(o);f&&f.l(g),d=V(g),u&&u.l(g),b=V(g),c&&c.l(g),T=V(g),h&&h.l(g),g.forEach(_),m.forEach(_),this.h()},h(){C(t,"type","text"),C(t,"placeholder","Username..."),C(t,"class","input w-full"),A(t,"input-error",!l[3]&&l[5]),A(t,"input-warning",l[4]),A(t,"input-success",l[2]&&l[3]&&!l[1]),C(o,"class","my-4 min-h-16 px-8 w-full")},m(a,m){U(a,e,m),U(a,s,m),U(a,i,m),p(i,t),N(t,l[0]),p(i,r),p(i,o),f&&f.m(o,null),p(o,d),u&&u.m(o,null),p(o,b),c&&c.m(o,null),p(o,T),h&&h.m(o,null),E||(q=[D(t,"input",l[8]),D(t,"input",l[6]),D(i,"submit",M(l[7]))],E=!0)},p(a,m){m&1&&t.value!==a[0]&&N(t,a[0]),m&40&&A(t,"input-error",!a[3]&&a[5]),m&16&&A(t,"input-warning",a[4]),m&14&&A(t,"input-success",a[2]&&a[3]&&!a[1]),a[1]?f?f.p(a,m):(f=O(a),f.c(),f.m(o,d)):f&&(f.d(1),f=null),!a[3]&&a[5]?u||(u=R(),u.c(),u.m(o,b)):u&&(u.d(1),u=null),a[3]&&!a[2]&&!a[1]?c?c.p(a,m):(c=S(a),c.c(),c.m(o,T)):c&&(c.d(1),c=null),a[2]?h?h.p(a,m):(h=$(a),h.c(),h.m(o,null)):h&&(h.d(1),h=null)},d(a){a&&(_(e),_(s),_(i)),f&&f.d(),u&&u.d(),c&&c.d(),h&&h.d(),E=!1,Z(q)}}}function ne(l){let e,n;return e=new ee({props:{$$slots:{default:[ie]},$$scope:{ctx:l}}}),{c(){K(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,i){W(e,s,i),n=!0},p(s,[i]){const t={};i&2111&&(t.$$scope={dirty:i,ctx:s}),e.$set(t)},i(s){n||(X(e.$$.fragment,s),n=!0)},o(s){Y(e.$$.fragment,s),n=!1},d(s){x(e,s)}}}const ae=/^(?=[a-zA-Z0-9._]{3,16}$)(?!.*[_.]{2})[^_.].*[^_.]$/;function oe(l,e,n){let s,i,t,r;H(l,te,u=>n(10,r=u));let o="",d=!1,b=!1,T;async function E(){n(2,b=!1),clearTimeout(T),n(1,d=!0),T=setTimeout(async()=>{const u=I(B,"usernames",o),c=await se(u).then(h=>h.exists());n(2,b=!c),n(1,d=!1)},700)}async function q(){const u=le(B);u.set(I(B,"usernames",o),{uid:r.uid}),u.set(I(B,"users",r.uid),{username:o,photoUrl:(r==null?void 0:r.photoURL)??null,published:!0,bio:"",links:[{title:"VLink",url:"https://spacebird.tech",icon:"custom"}]}),u.commit()}function f(){o=this.value,n(0,o)}return l.$$.update=()=>{l.$$.dirty&1&&n(3,s=(o==null?void 0:o.length)>2&&o.length<16&&ae.test(o)),l.$$.dirty&1&&n(5,i=o.length>0),l.$$.dirty&14&&n(4,t=s&&!b&&!d)},[o,d,b,s,t,i,E,q,f]}class he extends G{constructor(e){super(),J(this,e,oe,ne,F,{})}}export{he as component};
